 📊 연차료 계산 알고리즘 상세 설명

  1️⃣ 기본 정보 수집 단계

  입력 데이터:
  - 특허 등록일 (예: 2021-01-14)
  - 현재 날짜 (예: 2025-08-21)
  - 특허 출원번호, 등록번호 등 기본 정보

  2️⃣ 해당 연차수 계산

  알고리즘:
  1. 년도 차이 계산: 현재년도 - 등록년도
  2. 월/일 보정: 현재 월일이 등록 월일보다 이르면 -1년
  3. 연차수 = 년도차이 + 1 (등록 다음해부터 1년차 시작)

  예시:
  등록일: 2021-01-14, 현재: 2025-08-21
  → 년도차이: 2025 - 2021 = 4년
  → 8월21일 > 1월14일 이므로 보정 없음
  → 해당 연차수: 4 + 1 = 5년차

  3️⃣ 연차료 납부마감일 계산

  알고리즘:
  해당 연차료 납부마감일 = 등록일 + 해당연차수

  예시:
  등록일: 2021-01-14, 5년차
  → 납부마감일: 2021-01-14 + 5년 = 2026-01-14

  4️⃣ 기본 연차료 조회 (2024년 KIPO 기준)

  연차료 테이블:
  1~3년차: 45,000원
  4~6년차: 120,000원
  7~9년차: 360,000원
  10~12년차: 480,000원
  13~15년차: 720,000원
  16~18년차: 960,000원
  19~20년차: 1,200,000원

  예시: 5년차 → 120,000원

  5️⃣ 특허 상태 판정

  알고리즘:
  1. 유효: 현재날짜 ≤ 납부마감일
  2. 추납기간: 납부마감일 < 현재날짜 ≤ (납부마감일 + 6개월)
  3. 회복기간: (납부마감일 + 6개월) < 현재날짜 ≤ (납부마감일 + 9개월)
  4. 불납: 현재날짜 > (납부마감일 + 9개월)
  5. 만료: 연차수 > 20년

  예시:
  납부마감일: 2026-01-14, 현재: 2025-08-21
  → 2025-08-21 < 2026-01-14 → "유효"

  6️⃣ 추가 비용 계산

  6-1. 추납기간 가산료 계산

  알고리즘:
  1. 연체 개월수 계산:
     - 기본: (현재년월 - 마감년월)
     - 일자 보정: 현재일 ≤ 마감일이면 -1개월
     - 최소 1개월, 최대 6개월

  2. 가산료율 적용:
     1개월: 3%, 2개월: 6%, 3개월: 9%
     4개월: 12%, 5개월: 15%, 6개월: 18%

  3. 가산료 = 기본연차료 × 가산료율
  4. 10원 단위 반올림

  예시:
  기본연차료: 120,000원, 연체 2개월
  → 가산료: 120,000 × 6% = 7,200원
  → 총 연차료: 120,000 + 7,200 = 127,200원

  6-2. 회복기간 할증료 계산

  알고리즘:
  1. 회복 할증료 = 기본연차료 × 100% (2배)
  2. 10원 단위 반올림

  예시:
  기본연차료: 120,000원
  → 할증료: 120,000 × 100% = 120,000원
  → 총 연차료: 120,000 + 120,000 = 240,000원

  7️⃣ 기간 계산

  7-1. 추납기간 계산

  알고리즘:
  추납기간 시작일 = 납부마감일 + 1일
  추납기간 종료일 = 납부마감일 + 6개월

  월말 안전 처리:
  - 목표월에 해당 일자가 없으면 그 달의 마지막 날로 설정
  - 예: 1월31일 + 1개월 = 2월28일(또는 29일)

  7-2. 회복기간 계산

  알고리즘:
  회복기간 시작일 = 추납기간 종료일 + 1일
  회복기간 종료일 = 납부마감일 + 9개월

  8️⃣ 차기년도 납부의뢰 계산

  알고리즘:
  1. 현재 특허가 "유효" 상태이고
  2. 다음 연차수가 20년 이하인 경우:
     - 차기 연차수 = 현재 연차수 + 1
     - 차기 납부마감일 = 등록일 + 차기연차수
     - 차기 연차료 = KIPO 테이블에서 조회

  예시:
  현재 5년차 유효 → 차기 6년차
  차기 연차료: 120,000원
  차기 마감일: 2027-01-14

  9️⃣ 특허평가 (향후 확장 예정)

  현재: 모든 특허에 대해 "-" 표시
  향후: AI 기반 특허 가치 평가 시스템 연동 예정

  🔟 결과 표시 형식

  테이블 컬럼별 표시 방식:
  - 해당 연차료 납부마감일: YYYY-MM-DD
  - 해당연차수: "N년차"
  - 해당연차료: "XXX,XXX원"
  - 유효/불납: "유효", "추납기간", "회복기간", "불납", "만료"
  - 차기년도 납부의뢰: "N년차 XXX,XXX원 (YYYY-MM-DD 마감)"
  - 추납기간: "YYYY-MM-DD ~ YYYY-MM-DD" 또는 "진행중 (YYYY-MM-DD 마감)"
  - 회복기간: "YYYY-MM-DD ~ YYYY-MM-DD" 또는 "진행중 (YYYY-MM-DD 마감)"

  📋 전체 처리 흐름 요약

  1. 각 특허별로 순차 처리
  2. 등록일 유효성 검사
  3. 연차수 계산 → 20년 초과시 "만료" 처리
  4. 납부마감일 계산
  5. 현재 상태 판정 (유효/추납/회복/불납)
  6. 상태별 추가 비용 계산
  7. 각종 기간 계산
  8. 차기년도 정보 계산
  9. 테이블에 결과 표시
  10. 완료 메시지 표시 (3초 후 자동 삭제)

  그럼 이 알고고리즘으로 출원일 2016.01.04이고 등록일 2017.05.15일때 결과를 알려줘
   1️⃣ 기본 정보

  출원일: 2016-01-04
  등록일: 2017-05-15
  현재일: 2025-08-21 (오늘 기준)

  2️⃣ 해당 연차수 계산

  년도 차이: 2025 - 2017 = 8년
  월일 비교: 8월21일 > 5월15일 (보정 없음)
  해당 연차수: 8 + 1 = 9년차

  3️⃣ 연차료 납부마감일 계산

  납부마감일: 2017-05-15 + 9년 = 2026-05-15

  4️⃣ 기본 연차료 조회

  9년차 → 7~9년차 구간 → 360,000원

  5️⃣ 특허 상태 판정

  현재일: 2025-08-21
  납부마감일: 2026-05-15
  추납기간 종료: 2026-05-15 + 6개월 = 2026-11-15
  회복기간 종료: 2026-05-15 + 9개월 = 2027-02-15

  2025-08-21 < 2026-05-15 → "유효"

  6️⃣ 추가 비용 계산

  상태가 "유효"이므로 추가 비용 없음
  총 연차료: 360,000원

  7️⃣ 각종 기간 계산

  추납기간

  추납기간: 2026-05-15 ~ 2026-11-15

  회복기간

  회복기간: 2026-11-15 ~ 2027-02-15

  8️⃣ 차기년도 납부의뢰

  현재 상태: "유효"
  차기 연차수: 9 + 1 = 10년차
  차기 연차료: 480,000원 (10~12년차 구간)
  차기 납부마감일: 2017-05-15 + 10년 = 2027-05-15

  ---
  🎯 최종 결과 (테이블 표시 형식)

  | 항목           | 값                             |
  |--------------|-------------------------------|
  | 해당 연차료 납부마감일 | 2026-05-15                    |
  | 해당연차수        | 9년차                           |
  | 해당연차료        | 360,000원                      |
  | 유효/불납        | 유효                            |
  | 차기년도 납부의뢰    | 10년차 480,000원 (2027-05-15 마감) |
  | 추납기간         | 2026-05-15 ~ 2026-11-15       |
  | 회복기간         | 2026-11-15 ~ 2027-02-15       |
  | 특허평가         | -                             |

  ---
  📝 요약

  - 이 특허는 현재 9년차이며 유효 상태입니다
  - 2026년 5월 15일까지 360,000원을 납부해야 합니다
  - 만약 마감일을 넘기면 2026년 11월 15일까지 추납 가능합니다
  - 차기년도(10년차)에는 480,000원을 2027년 5월 15일까지 납부해야 합니다

  이 결과는 현재 시스템에서 "연차료 계산" 버튼을 눌렀을 때 표시되는 내용과 동일합니다.